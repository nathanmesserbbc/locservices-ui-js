define(["jquery","locservices/ui/component/component","locservices/core/geolocation"],function(a,b,c){function d(a,b){return function(){return a.apply(b,arguments)}}function e(a){if(this.isSupported=c.isSupported,this.isSupported!==!1){if(a=a||{},a.componentId="geolocation","object"!=typeof a.api)throw new Error("Gelocation requires an API option.");this.api=a.api;var b=this;this.setComponentOptions(a),this.emit("available");var d=this.translations.get("geolocation.button.label");this.container.append(f.replace("{text}",d)),this._button=this.container.find("button.ls-ui-comp-geolocation"),this._button.on("click",function(a){a.preventDefault(),b.emit("click"),b.reverseGeocode()})}}var f='<button type="button" class="ls-ui-comp ls-ui-comp-geolocation">';return f+='<span class="ls-ui-comp-geolocation-label">{text}</span>',f+='<span class="ls-ui-comp-geolocation-icon"></span></button>',e.prototype=new b,e.prototype.constructor=e,e.prototype.reverseGeocode=function(){function a(a){var b=a.coords.longitude,c=a.coords.latitude;e.api.reverseGeocode(c,b,{success:function(a){var b=a.results[0];b.isWithinContext?(e._button.removeAttr("disabled").removeClass("ls-ui-comp-geolocation-disabled"),e.emit("location",[b])):e.emit("error",[{code:"geolocation.error.outsideContext",message:"Your location is not currently supported by this application"}])},error:function(){e.emit("error",[{code:"geolocation.error.http",message:"We were unable to make a location api request"}])}})}function b(a){var b="geolocation.error.browser",c="An error occurred obtaining the browsers position. Error code "+a.code;1===a.code&&(b+=".permission"),this.emit("error",[{code:b,message:c}])}var e=this;this._button.attr("disabled","disabled").addClass("ls-ui-comp-geolocation-disabled"),this.emit("start"),c.getCurrentPosition(d(a,this),d(b,this))},e});