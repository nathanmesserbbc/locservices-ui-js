!function(a,b){return"function"==typeof define&&define.amd?define(b):("undefined"==typeof a.locservices&&(a.locservices={}),"undefined"==typeof a.locservices.core&&(a.locservices.core={}),a.locservices.core.API=b(),void 0)}(this,function(){"use strict";function a(a,b){var c;for(c in a)a.hasOwnProperty(c)&&!b.hasOwnProperty(c)&&(b[c]=a[c]);return b}function b(b){var d,e="";this._defaultParams={},this._options=a({env:"live",protocol:"http"},b||{});var f=c(this._options);for(d in f)f.hasOwnProperty(d)&&"env"!==d&&"protocol"!==d&&(this._defaultParams[d]=this._options[d]);"live"!==this._options.env&&(e="."+this._options.env),this._baseUri=this._options.protocol+"://open."+this._options.env+".bbc.co.uk/locator",this._palBaseUri=this._options.protocol+"://www"+e+".bbc.co.uk"}function c(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&((typeof a[b]).match(/string|number/)?c[b]=a[b]:"[object Array]"===Object.prototype.toString.call(a[b])&&(c[b]=a[b].join(",")));return c}b.prototype.getLocation=function(b,e){var f="",g="location";e.params=a(this._defaultParams,c(e||{})),e.detailTypes&&"[object Array]"===Object.prototype.toString.call(e.detailTypes)&&(g="details",f="/details/"+e.detailTypes.join(","),e.params.vv=2);var h=this._baseUri+"/locations/"+encodeURIComponent(b)+f;d(h,e,g)},b.prototype.search=function(b,e){function f(){var a=e.success,c=b,d=e.params.start;return function(b){b.metadata.search=c,d&&(b.metadata.start=d),a(b)}}e.params=a(this._defaultParams,c(e||{})),e.params.s=b,e.success=f(),d(this._baseUri+"/locations",e,"search")},b.prototype.autoComplete=function(b,e){e.params=a(this._defaultParams,c(e||{})),e.params.s=b,e.params.a="true",d(this._baseUri+"/locations",e,"autoComplete")},b.prototype.reverseGeocode=function(b,e,f){f.params=a(this._defaultParams,c(f||{})),f.params.lo=e,f.params.la=b,d(this._baseUri+"/locations",f,"reverseGeocode")},b.prototype.getCookie=function(a,b){b.params=b.params||{},b.params.id=a,d(this._palBaseUri+"/locator/default/shared/location.json",b,"cookie")};var d=function(a,b,c){var d,g;g="_locservices_core_api_cb_"+(new Date).getTime()+Math.round(1e5*Math.random()),b.params.format="jsonp",b.params.jsonp=g,window[g]=function(a){delete window[g],document.body.removeChild(d),b.success&&b.success(e(a,c))},d=document.createElement("script"),d.src=a+f(b.params),"function"==typeof b.error&&(d.onerror=b.error),document.body.appendChild(d)},e=function(a,b){var c={};switch(b){case"cookie":c=a;break;case"location":c.location=a.response;break;case"details":c.location=a.response.metadata.location,c.details=a.response.content.details.details;break;case"search":c.results=a.response.locations,c.metadata={totalResults:a.response.totalResults};break;case"autoComplete":c.results=a.response.results.results,c.metadata={totalResults:a.response.results.totalResults};break;case"reverseGeocode":c.results=a.response.results.results}return c},f=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+encodeURIComponent(a[c]));return"?"+b.join("&")};return b});
//# sourceMappingURL=api.min.map